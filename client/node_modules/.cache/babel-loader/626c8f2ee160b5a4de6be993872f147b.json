{"ast":null,"code":"import _objectSpread from\"D:\\\\Learn_ReactJS\\\\document-share\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"D:\\\\Learn_ReactJS\\\\document-share\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState}from'react';import TextField from'@mui/material/TextField';import Button from'@mui/material/Button';import Alert from'@mui/material/Alert';import'./css/account.css';import{sendReqToServer,setMess,setIsLoad}from'../features/authenticateSlice';import CircularProgress from'@mui/material/CircularProgress';import qs from'qs';import $ from'jquery';import{useNavigate}from\"react-router-dom\";import{useDispatch,useSelector}from'react-redux';import Logo from\"../assets/img/document-share.png\";import FormImg from\"../assets/img/form-img.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signin(){var auth=useSelector(function(state){return state.authenticate.auth.isAuthenticated;});var message=useSelector(function(state){return state.authenticate.auth.message;});var isLoad=useSelector(function(state){return state.authenticate.isLoading;});var _useState=useState({username:false,password:false}),_useState2=_slicedToArray(_useState,2),typeField=_useState2[0],setTypeField=_useState2[1];var navigate=useNavigate();var dispatch=useDispatch();var handleChange=function handleChange(){dispatch(setMess({type:null,mess:null}));navigate('/signup');};var checkSignIn=function checkSignIn(data){if(data.username===\"\"){setTypeField(_objectSpread(_objectSpread({},typeField),{},{username:true}));dispatch(setMess({type:'error field',mess:\"Tên đăng nhập không được trống !\"}));return false;}else if(data.password===\"\"){setTypeField({username:false,password:true});dispatch(setMess({type:'error field',mess:\"Mật khẩu không được trống !\"}));return false;}else{setMess({type:null,mess:null});return true;}};var handleClick=function handleClick(event){setTypeField({username:false,password:false});dispatch(setMess({type:null,mess:null}));var username=String($('#username').val());var password=String($('#password').val());var data={username:username,password:password};if(checkSignIn(data)){var configReq={method:'POST',url:'/account/signin',header:'application/x-www-form-urlencoded;charset=utf-8',data:qs.stringify({\"username\":\"\".concat(username),\"password\":\"\".concat(password)})};dispatch(setIsLoad(true));setTimeout(function(){dispatch(sendReqToServer(configReq));},2000);if(auth){navigate('/document');}}};return/*#__PURE__*/_jsx(\"div\",{className:\"account-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"account-form form-signin\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"account-form__img\",children:/*#__PURE__*/_jsx(\"img\",{src:FormImg,alt:\"FormImg\"})}),/*#__PURE__*/_jsxs(\"form\",{className:\"account-form__form\",children:[/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"Logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0110\\u0103ng nh\\u1EADp\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"Ti\\u1EBFp t\\u1EE5c v\\u1EDBi t\\xE0i kho\\u1EA3n Dshare\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__body\",children:[message.type!=null&&/*#__PURE__*/_jsx(Alert,{severity:message.type===\"error\"&&\"error\"||message.type===\"error field\"&&\"error\",children:message.mess}),/*#__PURE__*/_jsx(TextField,{id:\"username\",label:\"T\\xEAn ng\\u01B0\\u1EDDi d\\xF9ng\",error:typeField.username||message.type===\"error\",variant:\"outlined\",className:\"acf_b-textField\",margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{id:\"password\",label:\"M\\u1EADt kh\\u1EA9u\",error:typeField.password||message.type===\"error\",variant:\"outlined\",className:\"acf_b-textField\",margin:\"normal\",autoComplete:\"off\",type:\"password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__bottom\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"large\",className:\"btn-submit\",onClick:handleClick,children:isLoad?/*#__PURE__*/_jsx(CircularProgress,{color:\"secondary\",id:\"loading\"}):\"Đăng nhập\"}),/*#__PURE__*/_jsx(\"span\",{children:\"B\\u1EA1n kh\\xF4ng c\\xF3 t\\xE0i kho\\u1EA3n ?\"}),/*#__PURE__*/_jsx(Button,{variant:\"text\",size:\"small\",className:\"btn-registration\",onClick:handleChange,children:\"T\\u1EA1o t\\xE0i kho\\u1EA3n\"})]})]})]})});}export default Signin;","map":{"version":3,"sources":["D:/Learn_ReactJS/document-share/client/src/component/signin.js"],"names":["React","useState","TextField","Button","Alert","sendReqToServer","setMess","setIsLoad","CircularProgress","qs","$","useNavigate","useDispatch","useSelector","Logo","FormImg","Signin","auth","state","authenticate","isAuthenticated","message","isLoad","isLoading","username","password","typeField","setTypeField","navigate","dispatch","handleChange","type","mess","checkSignIn","data","handleClick","event","String","val","configReq","method","url","header","stringify","setTimeout"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport TextField from '@mui/material/TextField';\r\nimport Button from '@mui/material/Button';\r\nimport Alert from '@mui/material/Alert';\r\nimport './css/account.css'\r\nimport { sendReqToServer,setMess, setIsLoad } from '../features/authenticateSlice';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport qs from 'qs';\r\nimport $ from 'jquery';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport Logo from \"../assets/img/document-share.png\";\r\nimport FormImg from \"../assets/img/form-img.jpg\";\r\n\r\nfunction Signin() {\r\n    const auth = useSelector((state) => state.authenticate.auth.isAuthenticated);\r\n    const message = useSelector(state => state.authenticate.auth.message);\r\n    const isLoad = useSelector(state => state.authenticate.isLoading)\r\n    const [typeField, setTypeField] = useState({\r\n        username: false,\r\n        password: false,\r\n    })\r\n    const navigate = useNavigate();\r\n    const dispatch = useDispatch();\r\n    const handleChange = () => {\r\n        dispatch(setMess({\r\n            type: null,\r\n            mess: null\r\n        }));\r\n        navigate('/signup');\r\n    };\r\n\r\n    const checkSignIn = (data) => {\r\n        if(data.username === \"\") {\r\n            setTypeField({\r\n                ...typeField,\r\n                username: true\r\n            })\r\n            dispatch(setMess({\r\n                type: 'error field',\r\n                mess: \"Tên đăng nhập không được trống !\"\r\n            }))\r\n            return false;\r\n        }\r\n        else if(data.password === \"\") {\r\n            setTypeField({\r\n                username: false,\r\n                password: true\r\n            })\r\n            dispatch(setMess({\r\n                type: 'error field',\r\n                mess: \"Mật khẩu không được trống !\"\r\n            }))\r\n            return false;\r\n        }\r\n        else {\r\n            setMess({\r\n                type: null,\r\n                mess: null\r\n            })\r\n            return true;\r\n        }\r\n    }\r\n\r\n    const handleClick = (event) => {\r\n        setTypeField({\r\n            username:false,\r\n            password: false\r\n        })\r\n        dispatch(setMess({\r\n            type: null,\r\n            mess: null\r\n        }))\r\n        const username = String($('#username').val());\r\n        const password = String($('#password').val());\r\n        const data = {\r\n            username: username,\r\n            password: password\r\n        }\r\n        if(checkSignIn(data)) {\r\n            const configReq = {\r\n                method: 'POST',\r\n                url: '/account/signin',\r\n                header: 'application/x-www-form-urlencoded;charset=utf-8',\r\n                data: qs.stringify({\r\n                    \"username\": `${username}`,\r\n                    \"password\": `${password}`\r\n                })\r\n            }\r\n            dispatch(setIsLoad(true))\r\n            setTimeout(() => {\r\n                dispatch(sendReqToServer(configReq))\r\n            }, 2000)\r\n            if(auth) {\r\n                navigate('/document');\r\n            }\r\n        }\r\n    }\r\n    return(\r\n        <div className='account-page'>\r\n            <div className='account-form form-signin'>\r\n                <div className='account-form__img'>\r\n                    <img src={FormImg} alt=\"FormImg\"/>\r\n                </div>\r\n                <form className='account-form__form'>\r\n                    <img src={Logo} alt=\"Logo\"/>\r\n                    <div className='form__header'>\r\n                        <h2>Đăng nhập</h2>\r\n                        <h4>Tiếp tục với tài khoản Dshare</h4>\r\n                    </div>\r\n                    <div className='form__body'>\r\n                        {message.type != null && <Alert severity={(message.type === \"error\" && \"error\") || (message.type === \"error field\" && \"error\")}>{message.mess}</Alert>}\r\n                        <TextField id=\"username\" label=\"Tên người dùng\" error={typeField.username || message.type === \"error\"} variant=\"outlined\" className='acf_b-textField' margin=\"normal\"/>\r\n                        <TextField id=\"password\" label=\"Mật khẩu\" error={typeField.password || message.type === \"error\"} variant=\"outlined\" className='acf_b-textField'margin=\"normal\" autoComplete='off' type=\"password\"/>\r\n                    </div>\r\n                    <div className='form__bottom'>\r\n                        <Button variant=\"contained\" size=\"large\" className='btn-submit' onClick={handleClick}>{isLoad ? <CircularProgress color=\"secondary\" id='loading'/> : \"Đăng nhập\"}</Button>\r\n                        <span>Bạn không có tài khoản ?</span>\r\n                        <Button variant=\"text\" size=\"small\" className='btn-registration' onClick={handleChange}>Tạo tài khoản</Button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Signin;"]},"metadata":{},"sourceType":"module"}