{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport sendReq from '../helper/sendReqToServer';\nexport const upLoadFile = createAsyncThunk(\"localhost:4000/file/upload\", async (data, thunkAPI) => {\n  const configReq = {\n    method: 'post',\n    url: `/file/upload/${data.type}`,\n    header: {},\n    data: data.data\n  };\n  const res = await sendReq(configReq);\n  return res.data;\n});\nexport const downLoadFile = createAsyncThunk(\"localhost:4000/download\", async (file, thunkAPI) => {\n  const configReq = {\n    method: \"get\",\n    url: `/file/download/${file._id}`,\n    responseType: \"blob\"\n  };\n  await sendReq(configReq).then(async res => {\n    const link = document.createElement(\"a\");\n    link.target = \"_blank\";\n    link.download = file.metadata.originalname;\n    link.href = URL.createObjectURL(new Blob([res.data], {\n      type: `${res.data.type}`\n    }));\n    link.click();\n  });\n});\nexport const getFile = createAsyncThunk(\"localhost:4000/data\", async (_ref, thunkAPI) => {\n  let {\n    type,\n    path,\n    page,\n    limit\n  } = _ref;\n  const configReq = {\n    method: \"get\",\n    url: '/data',\n    params: {\n      type: type,\n      path: path,\n      page: page,\n      limit: limit\n    }\n  };\n  const res = await sendReq(configReq);\n  return res.data;\n});\nexport const createFolder = createAsyncThunk(\"localhost:4000/folder/create\", async (data, thunkAPI) => {\n  const configReq = {\n    method: \"get\",\n    url: '/folder/create',\n    params: {\n      name: data.name,\n      path: data.path\n    }\n  };\n  const res = await sendReq(configReq);\n  return res.data;\n});\nconst file = createSlice({\n  name: \"file\",\n  initialState: {\n    file: [],\n    length: null,\n    limit: 10,\n    fileDownload: \"\",\n    message: {\n      type: null,\n      mess: null\n    },\n    isLoading: true\n  },\n  reducers: {\n    setMessage: (state, action) => {\n      state.message = action.payload;\n    },\n    setLimit: (state, action) => {\n      state.limit = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(upLoadFile.pending, (state, action) => {\n      state.isLoading = true;\n    });\n    builder.addCase(getFile.pending, (state, action) => {\n      state.isLoading = true;\n    });\n    builder.addCase(getFile.fulfilled, (state, action) => {\n      state.file = action.payload.file;\n      state.length = action.payload.length;\n      state.isLoading = false;\n    });\n    builder.addCase(getFile.rejected, (state, action) => {\n      console.log(action.payload);\n    });\n    builder.addCase(createFolder.pending, (state, action) => {\n      state.isLoading = true;\n    });\n    builder.addCase(createFolder.fulfilled, (state, action) => {\n      state.message = action.payload.message;\n      state.isLoading = false;\n    });\n    builder.addCase(createFolder.rejected, (state, action) => {\n      console.log(action.payload);\n    });\n  }\n});\nexport const {\n  setMessage,\n  setLimit\n} = file.actions;\nexport default file.reducer;","map":{"version":3,"sources":["D:/Learn_ReactJS/document-share/client/src/features/fileSlice.js"],"names":["createAsyncThunk","createSlice","sendReq","upLoadFile","data","thunkAPI","configReq","method","url","type","header","res","downLoadFile","file","_id","responseType","then","link","document","createElement","target","download","metadata","originalname","href","URL","createObjectURL","Blob","click","getFile","path","page","limit","params","createFolder","name","initialState","length","fileDownload","message","mess","isLoading","reducers","setMessage","state","action","payload","setLimit","extraReducers","builder","addCase","pending","fulfilled","rejected","console","log","actions","reducer"],"mappings":"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","sourcesContent":["import {createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport sendReq from '../helper/sendReqToServer';\r\n\r\n\r\nexport const upLoadFile = createAsyncThunk(\r\n    \"localhost:4000/file/upload\",\r\n    async (data, thunkAPI) => {\r\n        const configReq = {\r\n            method: 'post',\r\n            url: `/file/upload/${data.type}`,\r\n            header: {},\r\n            data: data.data,\r\n        }\r\n        const res = await sendReq(configReq);\r\n        return res.data;\r\n    }\r\n)\r\n\r\nexport const downLoadFile = createAsyncThunk(\r\n    \"localhost:4000/download\",\r\n    async (file, thunkAPI) => {\r\n        const configReq = {\r\n            method: \"get\",\r\n            url: `/file/download/${file._id}`,\r\n            responseType: \"blob\"\r\n        }\r\n        await sendReq(configReq)\r\n        .then(async (res) => {\r\n            const link = document.createElement(\"a\");\r\n            link.target = \"_blank\";\r\n            link.download = file.metadata.originalname;\r\n            link.href = URL.createObjectURL(\r\n                new Blob([res.data], { type: `${res.data.type}` })\r\n            );\r\n            link.click();\r\n        });\r\n    }\r\n)\r\n\r\nexport const getFile = createAsyncThunk(\r\n    \"localhost:4000/data\",\r\n    async ({type, path, page, limit},thunkAPI) => {\r\n        const configReq = {\r\n            method: \"get\",\r\n            url: '/data',\r\n            params: {\r\n                type : type,\r\n                path : path,\r\n                page : page,\r\n                limit: limit\r\n            }\r\n        }\r\n        const res = await sendReq(configReq);\r\n        return res.data\r\n    }\r\n)\r\n\r\nexport const createFolder = createAsyncThunk(\r\n    \"localhost:4000/folder/create\",\r\n    async (data,thunkAPI) => {\r\n        const configReq = {\r\n            method: \"get\",\r\n            url: '/folder/create',\r\n            params: {\r\n                name: data.name,\r\n                path: data.path\r\n            }\r\n        }\r\n        const res = await sendReq(configReq);\r\n        return res.data\r\n    }\r\n)\r\n\r\nconst file = createSlice({\r\n    name: \"file\",\r\n    initialState: {\r\n        file: [],\r\n        length: null,\r\n        limit: 10,\r\n        fileDownload: \"\",\r\n        message: {\r\n            type: null,\r\n            mess: null\r\n        },\r\n        isLoading: true\r\n    },\r\n    reducers: {\r\n        setMessage : (state, action) => {\r\n            state.message = action.payload\r\n        },\r\n        setLimit: (state, action) => {\r\n            state.limit = action.payload\r\n        }\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder.addCase(upLoadFile.pending, (state, action) => {\r\n            state.isLoading = true;\r\n        })\r\n\r\n        builder.addCase(getFile.pending, (state, action) => {\r\n            state.isLoading = true\r\n        })\r\n        builder.addCase(getFile.fulfilled, (state, action) => {\r\n            state.file = action.payload.file\r\n            state.length = action.payload.length\r\n            state.isLoading = false\r\n        })\r\n        builder.addCase(getFile.rejected, (state, action) => {\r\n            console.log(action.payload)\r\n        })\r\n\r\n        builder.addCase(createFolder.pending, (state, action) => {\r\n            state.isLoading = true\r\n        })\r\n        builder.addCase(createFolder.fulfilled, (state, action) => {\r\n            state.message = action.payload.message\r\n            state.isLoading = false\r\n        })\r\n        builder.addCase(createFolder.rejected, (state, action) => {\r\n            console.log(action.payload)\r\n        })\r\n    }\r\n})\r\n\r\nexport const {setMessage, setLimit} = file.actions;\r\nexport default file.reducer;"]},"metadata":{},"sourceType":"module"}